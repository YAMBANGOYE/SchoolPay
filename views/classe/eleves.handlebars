        <main class="main-content">
            <!-- Top Navbar -->
              {{> menu}}

            <!-- Stats Cards -->
       

            <!-- Content Grid -->
            <section class="content-grid">

                     

                <!-- Data Table -->
                <div class="glass-card table-card">
                    <div class="card-header">
                        <div>
                            <h2 class="card-title">Liste des élèves de la classe {{classe.libelle}}</h2>
                            <p class="card-subtitle">Nous avons {{eleves.length}} élèves dans cette classe</p>
                        </div>
                        <div class="card-actions">
                            <a href="/classes/create">
                            <button class="card-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 6px;">
                                    <line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>
                                </svg>
                                Ajout élèves
                            </button>
                            </a>
                            <button class="card-btn">Imprimmer</button>
                                             <select class="settings-select" id="exampleFormControlSelect1" name="ecole">
                                                <option value="">-- Tri par Etablissement --</option>
                                               {{#each Ecoles}}
                                                    <option value="{{_id}}">{{libelle}}</option>
                                                {{/each}}
                                            </select>

                        </div>
                    </div>
                    <div class="table-wrapper">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nom</th>
                                    <th>Prenom</th>
                                    <th>Niveau</th>
                                    <th>Cycle</th>
                                    <th>Etablissement</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="eleves-body">
                                <!-- les couleurs du status change-->
                                {{#each eleves}}
                                 <tr data-ecole="{{ecole.libelle}}">
                                    <td><div class="table-user"><div class="table-avatar" style="background: linear-gradient(135deg, var(--emerald-light), var(--emerald));">{{prenomCourt}}</div><div class="table-user-info"><span class="table-user-name">{{nom}}</span><span class="table-user-email">{{prenom}}</span></div></div></td>
                                    <td>{{telephone}}</td>
                                    <td>{{email}}</td>
                                    <td>{{cycle}}</td>
                                    <td>{{ecole.libelle}}</td>
                                    <td>
                                      <div class="navbar-right">
                                        <a href="/classe/{{_id}}/one">
                                        <button class="nav-btn">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18">
                                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                            <circle cx="12" cy="12" r="3"/>
                                            </svg>
                                        </button>
                                        </a>
                                        <button class="nav-btn" id="theme-toggle" title="Toggle Light/Dark Mode">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18">
                                            <path d="M12 20h9"/>
                                            <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"/>
                                            </svg>
                                            <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                            </svg>
                                        </button>
                                        <a href="/eleves/{{_id}}" class="">
                                        <button class="nav-btn">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18">
                                                <polyline points="3 6 5 6 21 6"/>
                                                <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                                                <path d="M10 11v6"/>
                                                <path d="M14 11v6"/>
                                                <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/>
                                            </svg>
                                            
                                        </button>
                                        
                                        </a>
                                         
                                    </div>
                                           
                                    </td>
                                </tr>
                                {{/each}}
                               
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Bottom Grid -->
           
        </main>
    </div>
    <script>
  function deleteEleve(id) {
    if (!confirm('Supprimer cet élève ?')) return;

    fetch(`/eleves/${id}`, {
      method: 'DELETE'
    })
    .then(res => res.ok ? location.reload() : alert('Erreur'))
  }
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const selectEcole = document.getElementById("ecole");
  const tbody = document.getElementById("eleves-body");

  function trierEleves() {
    const ecoleChoisie = selectEcole.value;
    const rows = Array.from(tbody.querySelectorAll("tr"));

    // On trie d'abord par texte de la colonne "Etablissement"
    rows.sort((a, b) => {
      const ecoleA = a.querySelector("td:nth-child(4)").textContent.trim().toLowerCase();
      const ecoleB = b.querySelector("td:nth-child(4)").textContent.trim().toLowerCase();

      return ecoleA.localeCompare(ecoleB);
    });

    // Si une école est sélectionnée, on ne garde que ses lignes visibles
    rows.forEach(row => {
      if (!ecoleChoisie || row.dataset.ecole === ecoleChoisie) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });

    // Réinjecte toutes les lignes triées
    tbody.innerHTML = "";
    rows.forEach(row => tbody.appendChild(row));
  }

  // Tri initial au chargement
  trierEleves();

  // Tri + filtrage à chaque changement de select
  selectEcole.addEventListener("change", trierEleves);
});
</script>
